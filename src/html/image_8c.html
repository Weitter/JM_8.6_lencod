<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: image.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">image.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Code one image/slice.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;contributors.h&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;sys/timeb.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;memory.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;global.h&quot;</code><br />
<code>#include &quot;image.h&quot;</code><br />
<code>#include &quot;refbuf.h&quot;</code><br />
<code>#include &quot;mbuffer.h&quot;</code><br />
<code>#include &quot;header.h&quot;</code><br />
<code>#include &quot;intrarefresh.h&quot;</code><br />
<code>#include &quot;fmo.h&quot;</code><br />
<code>#include &quot;sei.h&quot;</code><br />
<code>#include &quot;memalloc.h&quot;</code><br />
<code>#include &quot;nalu.h&quot;</code><br />
<code>#include &quot;ratectl.h&quot;</code><br />
<code>#include &quot;mb_access.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a358ba8b4677fc366a506d61178d5aee2"><td class="memItemLeft" align="right" valign="top"><a id="a358ba8b4677fc366a506d61178d5aee2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>Clip</b>(min,  max,  val)&#160;&#160;&#160;(((val)&lt;(min))?(min):(((val)&gt;(max))?(max):(val)))</td></tr>
<tr class="separator:a358ba8b4677fc366a506d61178d5aee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ef611abcb1a76899248585921773705"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image_8c.html#a0ef611abcb1a76899248585921773705">code_a_picture</a> (Picture *pic)</td></tr>
<tr class="memdesc:a0ef611abcb1a76899248585921773705"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes a picture.  <a href="image_8c.html#a0ef611abcb1a76899248585921773705">More...</a><br /></td></tr>
<tr class="separator:a0ef611abcb1a76899248585921773705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4821fa518723a8dd7376eee309b37e7"><td class="memItemLeft" align="right" valign="top"><a id="ae4821fa518723a8dd7376eee309b37e7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image_8c.html#ae4821fa518723a8dd7376eee309b37e7">frame_picture</a> (Picture *frame)</td></tr>
<tr class="memdesc:ae4821fa518723a8dd7376eee309b37e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes a frame picture. <br /></td></tr>
<tr class="separator:ae4821fa518723a8dd7376eee309b37e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0107376131de21b581e2cf433acde33"><td class="memItemLeft" align="right" valign="top"><a id="ad0107376131de21b581e2cf433acde33"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image_8c.html#ad0107376131de21b581e2cf433acde33">field_picture</a> (Picture *top, Picture *bottom)</td></tr>
<tr class="memdesc:ad0107376131de21b581e2cf433acde33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes a field picture, consisting of top and bottom field. <br /></td></tr>
<tr class="separator:ad0107376131de21b581e2cf433acde33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c194f6926328638869ccd57f695cf99"><td class="memItemLeft" align="right" valign="top"><a id="a5c194f6926328638869ccd57f695cf99"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MbAffPostProc</b> ()</td></tr>
<tr class="separator:a5c194f6926328638869ccd57f695cf99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a525e7206cdf2995568f4b7830c1e450f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image_8c.html#a525e7206cdf2995568f4b7830c1e450f">encode_one_frame</a> ()</td></tr>
<tr class="memdesc:a525e7206cdf2995568f4b7830c1e450f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encodes one frame.  <a href="image_8c.html#a525e7206cdf2995568f4b7830c1e450f">More...</a><br /></td></tr>
<tr class="separator:a525e7206cdf2995568f4b7830c1e450f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a35abdc83808d6d46b42db981aff390"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image_8c.html#a8a35abdc83808d6d46b42db981aff390">UnifiedOneForthPix</a> (StorablePicture *s)</td></tr>
<tr class="memdesc:a8a35abdc83808d6d46b42db981aff390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upsample 4 times, store them in out4x. Color is simply copied.  <a href="image_8c.html#a8a35abdc83808d6d46b42db981aff390">More...</a><br /></td></tr>
<tr class="separator:a8a35abdc83808d6d46b42db981aff390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3df2d1e2924eea70eb295c0dbb6e27d"><td class="memItemLeft" align="right" valign="top"><a id="ab3df2d1e2924eea70eb295c0dbb6e27d"></a>
Boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image_8c.html#ab3df2d1e2924eea70eb295c0dbb6e27d">dummy_slice_too_big</a> (int bits_slice)</td></tr>
<tr class="memdesc:ab3df2d1e2924eea70eb295c0dbb6e27d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just a placebo. <br /></td></tr>
<tr class="separator:ab3df2d1e2924eea70eb295c0dbb6e27d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7fa07d8412928f09bf9fd71e4c1582"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="image_8c.html#a3a7fa07d8412928f09bf9fd71e4c1582">copy_rdopt_data</a> (int bot_block)</td></tr>
<tr class="separator:a3a7fa07d8412928f09bf9fd71e4c1582"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a054309c3eb92d21bb75040dfea36ad9e"><td class="memItemLeft" align="right" valign="top"><a id="a054309c3eb92d21bb75040dfea36ad9e"></a>
StorablePicture *&#160;</td><td class="memItemRight" valign="bottom"><b>enc_picture</b></td></tr>
<tr class="separator:a054309c3eb92d21bb75040dfea36ad9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53d47465c52fb55e3eabb3dc7beb66a"><td class="memItemLeft" align="right" valign="top"><a id="ac53d47465c52fb55e3eabb3dc7beb66a"></a>
StorablePicture *&#160;</td><td class="memItemRight" valign="bottom"><b>enc_frame_picture</b></td></tr>
<tr class="separator:ac53d47465c52fb55e3eabb3dc7beb66a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5144bfd6e505dbeb014c58b031e25bb"><td class="memItemLeft" align="right" valign="top"><a id="ad5144bfd6e505dbeb014c58b031e25bb"></a>
StorablePicture *&#160;</td><td class="memItemRight" valign="bottom"><b>enc_top_picture</b></td></tr>
<tr class="separator:ad5144bfd6e505dbeb014c58b031e25bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac918c65454900a320ba5034d883f4a78"><td class="memItemLeft" align="right" valign="top"><a id="ac918c65454900a320ba5034d883f4a78"></a>
StorablePicture *&#160;</td><td class="memItemRight" valign="bottom"><b>enc_bottom_picture</b></td></tr>
<tr class="separator:ac918c65454900a320ba5034d883f4a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ceeccca7e0fa98ff596701b2e536268"><td class="memItemLeft" align="right" valign="top"><a id="a6ceeccca7e0fa98ff596701b2e536268"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>QP</b></td></tr>
<tr class="separator:a6ceeccca7e0fa98ff596701b2e536268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac299d927ae71e2eb45d27bb087d3e88f"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><b>ONE_FOURTH_TAP</b> [3][2]</td></tr>
<tr class="separator:ac299d927ae71e2eb45d27bb087d3e88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Code one image/slice. </p>
<dl class="section author"><dt>Author</dt><dd>Main contributors (see contributors.h for copyright, address and affiliation details)<ul>
<li>Inge Lille-Langøy <a href="#" onclick="location.href='mai'+'lto:'+'ing'+'e.'+'lil'+'le'+'-la'+'ng'+'oy@'+'te'+'len'+'or'+'.co'+'m'; return false;">inge.<span style="display: none;">.nosp@m.</span>lill<span style="display: none;">.nosp@m.</span>e-lan<span style="display: none;">.nosp@m.</span>goy@<span style="display: none;">.nosp@m.</span>telen<span style="display: none;">.nosp@m.</span>or.c<span style="display: none;">.nosp@m.</span>om</a></li>
<li>Rickard Sjoberg <a href="#" onclick="location.href='mai'+'lto:'+'ric'+'ka'+'rd.'+'sj'+'obe'+'rg'+'@er'+'a.'+'eri'+'cs'+'son'+'.s'+'e'; return false;">ricka<span style="display: none;">.nosp@m.</span>rd.s<span style="display: none;">.nosp@m.</span>jober<span style="display: none;">.nosp@m.</span>g@er<span style="display: none;">.nosp@m.</span>a.eri<span style="display: none;">.nosp@m.</span>csso<span style="display: none;">.nosp@m.</span>n.se</a></li>
<li>Jani Lainema <a href="#" onclick="location.href='mai'+'lto:'+'jan'+'i.'+'lai'+'ne'+'ma@'+'no'+'kia'+'.c'+'om'; return false;">jani.<span style="display: none;">.nosp@m.</span>lain<span style="display: none;">.nosp@m.</span>ema@n<span style="display: none;">.nosp@m.</span>okia<span style="display: none;">.nosp@m.</span>.com</a></li>
<li>Sebastian Purreiter <a href="#" onclick="location.href='mai'+'lto:'+'seb'+'as'+'tia'+'n.'+'pur'+'re'+'ite'+'r@'+'mch'+'.s'+'iem'+'en'+'s.d'+'e'; return false;">sebas<span style="display: none;">.nosp@m.</span>tian<span style="display: none;">.nosp@m.</span>.purr<span style="display: none;">.nosp@m.</span>eite<span style="display: none;">.nosp@m.</span>r@mch<span style="display: none;">.nosp@m.</span>.sie<span style="display: none;">.nosp@m.</span>mens.<span style="display: none;">.nosp@m.</span>de</a></li>
<li>Byeong-Moon Jeon <a href="#" onclick="location.href='mai'+'lto:'+'jeo'+'nb'+'m@l'+'ge'+'.co'+'m'; return false;">jeonb<span style="display: none;">.nosp@m.</span>m@lg<span style="display: none;">.nosp@m.</span>e.com</a></li>
<li>Yoon-Seong Soh <a href="#" onclick="location.href='mai'+'lto:'+'yun'+'su'+'ng@'+'lg'+'e.c'+'om'; return false;">yunsu<span style="display: none;">.nosp@m.</span>ng@l<span style="display: none;">.nosp@m.</span>ge.co<span style="display: none;">.nosp@m.</span>m</a></li>
<li>Thomas Stockhammer <a href="#" onclick="location.href='mai'+'lto:'+'sto'+'ck'+'ham'+'me'+'r@e'+'i.'+'tum'+'.d'+'e'; return false;">stock<span style="display: none;">.nosp@m.</span>hamm<span style="display: none;">.nosp@m.</span>er@ei<span style="display: none;">.nosp@m.</span>.tum<span style="display: none;">.nosp@m.</span>.de</a></li>
<li>Detlev Marpe <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'pe'+'@hh'+'i.'+'de'; return false;">marpe<span style="display: none;">.nosp@m.</span>@hhi<span style="display: none;">.nosp@m.</span>.de</a></li>
<li>Guido Heising <a href="#" onclick="location.href='mai'+'lto:'+'hei'+'si'+'ng@'+'hh'+'i.d'+'e'; return false;">heisi<span style="display: none;">.nosp@m.</span>ng@h<span style="display: none;">.nosp@m.</span>hi.de</a></li>
<li>Thomas Wedi <a href="#" onclick="location.href='mai'+'lto:'+'wed'+'i@'+'tnt'+'.u'+'ni-'+'ha'+'nno'+'ve'+'r.d'+'e'; return false;">wedi@<span style="display: none;">.nosp@m.</span>tnt.<span style="display: none;">.nosp@m.</span>uni-h<span style="display: none;">.nosp@m.</span>anno<span style="display: none;">.nosp@m.</span>ver.d<span style="display: none;">.nosp@m.</span>e</a></li>
<li>Ragip Kurceren <a href="#" onclick="location.href='mai'+'lto:'+'rag'+'ip'+'.ku'+'rc'+'ere'+'n@'+'nok'+'ia'+'.co'+'m'; return false;">ragip<span style="display: none;">.nosp@m.</span>.kur<span style="display: none;">.nosp@m.</span>ceren<span style="display: none;">.nosp@m.</span>@nok<span style="display: none;">.nosp@m.</span>ia.co<span style="display: none;">.nosp@m.</span>m</a></li>
<li>Antti Hallapuro <a href="#" onclick="location.href='mai'+'lto:'+'ant'+'ti'+'.ha'+'ll'+'apu'+'ro'+'@no'+'ki'+'a.c'+'om'; return false;">antti<span style="display: none;">.nosp@m.</span>.hal<span style="display: none;">.nosp@m.</span>lapur<span style="display: none;">.nosp@m.</span>o@no<span style="display: none;">.nosp@m.</span>kia.c<span style="display: none;">.nosp@m.</span>om</a></li>
<li>Alexandros Tourapis <a href="#" onclick="location.href='mai'+'lto:'+'ale'+'xi'+'smt'+'@i'+'eee'+'.o'+'rg'; return false;">alexi<span style="display: none;">.nosp@m.</span>smt@<span style="display: none;">.nosp@m.</span>ieee.<span style="display: none;">.nosp@m.</span>org</a> </li>
</ul>
</dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0ef611abcb1a76899248585921773705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef611abcb1a76899248585921773705">&#9670;&nbsp;</a></span>code_a_picture()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void code_a_picture </td>
          <td>(</td>
          <td class="paramtype">Picture *&#160;</td>
          <td class="paramname"><em>pic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encodes a picture. </p>
<p>This is the main picture coding loop.. It is called by all this frame and field coding stuff after the img-&gt; elements have been set up. Not sure whether it is useful for MB-adaptive frame/field coding </p>
<p>Allocates forced INTRA MBs (even for fields!)</p>
<p>picture level initialization of FMO</p>

</div>
</div>
<a id="a3a7fa07d8412928f09bf9fd71e4c1582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a7fa07d8412928f09bf9fd71e4c1582">&#9670;&nbsp;</a></span>copy_rdopt_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void copy_rdopt_data </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bot_block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For MB level field/frame coding </p>

</div>
</div>
<a id="a525e7206cdf2995568f4b7830c1e450f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a525e7206cdf2995568f4b7830c1e450f">&#9670;&nbsp;</a></span>encode_one_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int encode_one_frame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encodes one frame. </p>
<p>Note: the distortion for a field coded picture is stored in the top field the distortion values in the bottom field are dummies</p>

</div>
</div>
<a id="a8a35abdc83808d6d46b42db981aff390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a35abdc83808d6d46b42db981aff390">&#9670;&nbsp;</a></span>UnifiedOneForthPix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UnifiedOneForthPix </td>
          <td>(</td>
          <td class="paramtype">StorablePicture *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Upsample 4 times, store them in out4x. Color is simply copied. </p>
<dl class="section user"><dt>Input:</dt><dd>srcy, srcu, srcv, out4y, out4u, out4v</dd></dl>
<dl class="section user"><dt>Side Effects_</dt><dd>Uses (writes) img4Y_tmp. This should be moved to a static variable in this module </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac299d927ae71e2eb45d27bb087d3e88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac299d927ae71e2eb45d27bb087d3e88f">&#9670;&nbsp;</a></span>ONE_FOURTH_TAP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int ONE_FOURTH_TAP[3][2]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">  {20,20},</div>
<div class="line">  {-5,-4},</div>
<div class="line">  { 1, 0},</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19
</small></address>
</body>
</html>
